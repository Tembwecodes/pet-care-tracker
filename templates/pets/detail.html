<!-- templates/pets/detail.html -->
{% extends 'base.html' %}
{% block content %}
<div class="pet-detail">
    <div class="pet-header">
        {% if pet.profile_picture %}
            <img src="{{ pet.profile_picture.url }}" alt="{{ pet.name }}" class="pet-profile-img">
        {% else %}
            <div class="pet-profile-placeholder">{{ pet.name.0 }}</div>
        {% endif %}
        
        <div class="pet-info">
            <h1>{{ pet.name }}</h1>
            <p>{{ pet.species }} â€¢ {{ pet.breed }}</p>
            <p>Born: {{ pet.date_of_birth }}</p>
            <p>Weight: {{ pet.weight }} lbs</p>
            <div class="pet-actions">
                <a href="{% url 'pets_update' pet.id %}" class="btn">Edit Pet</a>
                <a href="{% url 'pets_delete' pet.id %}" class="btn btn-danger">Delete Pet</a>
            </div>
        </div>
    </div>
    
    <div class="pet-tabs">
        <ul class="tabs-nav">
            <li class="tab-active"><a href="#info">Info</a></li>
            <li><a href="#medical">Medical</a></li>
            <li><a href="#feeding">Feeding</a></li>
            <li><a href="#medications">Medications</a></li>
            <li><a href="#training">Training</a></li>
            <li><a href="#photos">Photos</a></li>
        </ul>
        
        <div id="info" class="tab-content">
            <h2>Pet Information</h2>
            <p><strong>Description:</strong> {{ pet.description }}</p>
            <p><strong>Color:</strong> {{ pet.color }}</p>
        </div>
        
        <div id="medical" class="tab-content" style="display: none;">
            <h2>Medical Records</h2>
            <a href="#" class="btn add-record-btn">Add Medical Record</a>
            
            <div class="add-form" style="display: none;">
                <form action="{% url 'add_medical_record' pet.id %}" method="POST">
                    {% csrf_token %}
                    {{ medical_record_form.as_p }}
                    <input type="submit" value="Add Record" class="btn">
                </form>
            </div>
            
            <div class="records-list">
                {% for record in medical_records %}
                    <div class="card">
                        <div class="card-header">
                            <h3>{{ record.record_type }}</h3>
                            <div class="card-actions">
                                <a href="{% url 'medical_records_update' record.id %}" class="btn btn-sm">Edit</a>
                                <a href="{% url 'medical_records_delete' record.id %}" class="btn btn-sm btn-danger">Delete</a>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Date:</strong> {{ record.record_date }}</p>
                            <p><strong>Veterinarian:</strong> {{ record.veterinarian }}</p>
                            <p><strong>Diagnosis:</strong> {{ record.diagnosis }}</p>
                            {% if record.notes %}
                                <p><strong>Notes:</strong> {{ record.notes }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% empty %}
                    <p>No medical records yet.</p>
                {% endfor %}
            </div>
        </div>
        
        <div id="feeding" class="tab-content" style="display: none;">
            <h2>Feeding Schedule</h2>
            <a href="#" class="btn add-feeding-btn">Add Feeding Schedule</a>
            
            <div class="add-form" style="display: none;">
                <form action="{% url 'add_feeding_schedule' pet.id %}" method="POST">
                    {% csrf_token %}
                    {{ feeding_schedule_form.as_p }}
                    <input type="submit" value="Add Feeding Schedule" class="btn">
                </form>
            </div>
            
            <div class="feeding-list">
                {% for schedule in feeding_schedules %}
                    <div class="card">
                        <div class="card-header">
                            <h3>{{ schedule.food_type }}</h3>
                            <div class="card-actions">
                                <a href="{% url 'feeding_schedules_update' schedule.id %}" class="btn btn-sm">Edit</a>
                                <a href="{% url 'feeding_schedules_delete' schedule.id %}" class="btn btn-sm btn-danger">Delete</a>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Amount:</strong> {{ schedule.amount }}</p>
                            <p><strong>Frequency:</strong> {{ schedule.frequency }}</p>
                            <p><strong>Time:</strong> {{ schedule.time_of_day }}</p>
                            {% if schedule.notes %}
                                <p><strong>Notes:</strong> {{ schedule.notes }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% empty %}
                    <p>No feeding schedules yet.</p>
                {% endfor %}
            </div>
        </div>
        
        <!-- Similar tab content sections for medications, training, and photos -->
        <!-- I'll add just one more as an example, you'd create similar sections for the other tabs -->
        
        <div id="medications" class="tab-content" style="display: none;">
            <h2>Medications</h2>
            <a href="#" class="btn add-medication-btn">Add Medication</a>
            
            <div class="add-form" style="display: none;">
                <form action="{% url 'add_medication' pet.id %}" method="POST">
                    {% csrf_token %}
                    {{ medication_form.as_p }}
                    <input type="submit" value="Add Medication" class="btn">
                </form>
            </div>
            
            <div class="medication-list">
                {% for medication in medications %}
                    <div class="card">
                        <div class="card-header">
                            <h3>{{ medication.medication_name }}</h3>
                            <div class="card-actions">
                                <a href="{% url 'medications_update' medication.id %}" class="btn btn-sm">Edit</a>
                                <a href="{% url 'medications_delete' medication.id %}" class="btn btn-sm btn-danger">Delete</a>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Dosage:</strong> {{ medication.dosage }}</p>
                            <p><strong>Schedule:</strong> {{ medication.frequency }} at {{ medication.time_of_day }}</p>
                            <p><strong>Duration:</strong> {{ medication.start_date }} to {{ medication.end_date }}</p>
                            {% if medication.notes %}
                                <p><strong>Notes:</strong> {{ medication.notes }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% empty %}
                    <p>No medications yet.</p>
                {% endfor %}
            </div>
        </div>
        
        <!-- Add similar sections for training and photos -->
    </div>
</div>

<script>
    // Simple tab functionality
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tabs-nav li a');
        tabs.forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Hide all tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });
                
                // Remove active class from all tabs
                document.querySelectorAll('.tabs-nav li').forEach(li => {
                    li.classList.remove('tab-active');
                });
                
                // Show the selected tab content and mark tab as active
                const target = this.getAttribute('href');
                document.querySelector(target).style.display = 'block';
                this.parentElement.classList.add('tab-active');
            });
        });
        
        // Show/hide add forms
        const addButtons = document.querySelectorAll('.add-record-btn, .add-feeding-btn, .add-medication-btn');
        addButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const form = this.nextElementSibling;
                form.style.display = form.style.display === 'none' ? 'block' : 'none';
            });
        });
    });
</script>
{% endblock %}  